{% load djangocms_blog i18n easy_thumbnails_tags cms_tags %}

<article id="post-{{ post.slug }}" class="post-item">
    <a href="{{ post.get_absolute_url }}">
        {% if image and post.main_image %}
        <div class="blog-visual ic">
<!--            {% thumbnail post.main_image post.thumbnail_options.size crop=post.thumbnail_options.crop upscale=post.thumbnail_options.upscale subject_location=post.main_image.subject_location as thumb %}-->
<!--            <img src="{{ post.main_image.url }}" alt="{{ post.main_image.default_alt_text }}" width="{{ thumb.width }}" height="{{ thumb.height }}" />-->
            <img src="/static/website/images/waiting-image.svg" data-src="{{ post.main_image.url }}" alt="{{ post.main_image.default_alt_text }}" />
        </div>
        {% else %}
            {% media_images post as previews %}
            <div class="blog-visual ic">
              {% for preview in previews %}<img src="{{ preview }}" />{% endfor %}
            </div>
        {% endif %}
        <header>
            <h3>{{ post.title }}</h3>
            {% if post.subtitle %}
                <h4>{{ post.subtitle }}</h4>
            {% endif %}
        </header>
    </a>
</article>
